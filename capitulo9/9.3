#include <stdio.h>

/* Archivos y cadenas de caracteres.
El programa escribe cadenas de caracteres en un archivo. */
int main(void)
{
    char cad[50];
    int res;
    FILE *ar;

    if ((ar = fopen("arc.txt", "w")) != NULL) /* Se abre el archivo para escritura. En la misma instrucción se verifica si se pudo abrir. */
    {
        printf("\n¿Desea ingresar una cadena de caracteres? Sí-1 No-0: ");
        scanf("%d", &res);

        while (res)
        {
            fflush(stdin);
            printf("Ingrese la cadena: ");
            fgets(cad, sizeof(cad), stdin); /* Utilizamos fgets para leer la cadena, en lugar de gets que es inseguro. */

            fputs(cad, ar); /* Observa la forma como se escribe la cadena en el archivo. */

            printf("¿Desea ingresar otra cadena de caracteres? Sí-1 No-0: ");
            scanf("%d", &res);

            if (res)
                fputs("\n", ar);
            /* Se indica un salto de línea, excepto en la última cadena. Si no
               se hiciera esta indicación, la función fputs pegaría las cadenas y
               luego tendríamos dificultades en el momento de leerlas. Por otra
               parte, si realizáramos este salto de línea al final de la última
               cadena, en la escritura se repetiría la última cadena. */
        }

        fclose(ar);
    }
    else
    {
        printf("No se puede abrir el archivo\n");
        return 1; /* Devolver un valor distinto de cero indica un error en la ejecución. */
    }

    return 0; /* Indicar que el programa finalizó correctamente. */
}
